<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<title>$pageTool.title</title>
		<link rel="stylesheet" href="/content/dojo/dijit/themes/claro/document.css">
        <link rel="stylesheet" href="/content/dojo/dijit/themes/claro/claro.css">
		<link rel="stylesheet/less" href="/content/style/style.less">
        <script src="/content/less.js"></script>
        <style>
            #appLayout {
            	height: 100%;
        	}
        	html {
        		margin: 0px;
        	}
        	html, body, #mainDiv {
            width: 100%; height: 100%;
            border: 0; padding: 0; margin: 0;
        	}
        </style>
        <script data-dojo-config="async : true , parseOnLoad : true, isDebug:true" src="/content/dojo/dojo/dojo.js"></script>
        <script type="text/javascript">
               require(["dojo/parser",
               			"dijit/Dialog",
                		"dijit/form/Button",
                		"dijit/layout/BorderContainer",
                		"dijit/layout/TabContainer",
                		"dijit/layout/ContentPane",
                		"dijit/layout/AccordionContainer",
                		"dijit/Calendar"
                		]);
        </script>
	</head>
	<body class="claro">
    		<div id="appLayout"  data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design: 'headline'">
    			<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region : 'top'">
                				<p>Top panel text</p>

                				<!-- TODO Add toolbar, drop down menu with user specific information, some panel with system information like date and time -->

                				<p>more top panel text ... </p>
                				$component.embed('test.TestDynamicComponent')

                				<button data-dojo-type="dijit/form/Button" data-dojo-id="CreateTabBtn" type="button">Click to create new tab</button>
                				<button data-dojo-type="dijit/form/Button" data-dojo-id="ReservationTableBtn" type="button">Reservation Table</button>
                				<button data-dojo-type="dijit/form/Button" data-dojo-id="LedgeReservationTableBtn" type="button">Ledge Reservation Table</button>

                </div>

    			$embeddedPlaceholder##
    		</div>

    		<script>
    		         require(["dojo/ready", "dojo/on", "dijit/layout/ContentPane", "dojo/request", "dojo/dom-construct", "dojo/parser", "hotelms/ledge"], function(ready, on, ContentPane, request, domConstruct, parser, ledge){
    		            ready(function(){
    		                    on(CreateTabBtn.domNode, "click", function(event){
     		                         var cp1 = new ContentPane({
                                                  title: "New Tab",
                                                  content: "We offer amazing food"
                                             });
                                     MainTabContainer.addChild(cp1);
    		                    });


    		                    on(ReservationTableBtn.domNode, "click", function(event){
                                    request("$link.view('top.ReservationTable')").then(function(data){
                                        var dataDOM = domConstruct.toDom(data);
                                        var cp1 = new ContentPane({
                                            title: 'Reservation table',
                                            content: dataDOM
                                        });
                                        MainTabContainer.addChild(cp1);
                                        request("$link.view('top.ReservationTableScript')",{handleAs:'javascript'});
                                    }, function(err){
                                       console.log(err);
                                    }, function(event){
                                        console.log(event);
                                    });
                                });
                                    ##ledge.tab("$link.view('top.ReservationTable')", { title: 'Reservation Table'});
                                on(LedgeReservationTableBtn.domNode, "click", function(event){
                                    ledge.tab("$link.view('top.ReservationTable')", {title: 'Reservation Table fetched by ajax from views and json view'});
                                });

    		            });
    		         });
    		</script>
    </body>
</html>
$viewEnclosureTool.top()##

